# User Reputation System for Cloud Service Providers

This stage consists of several parts.

![Stages in Classification](img.JPG?raw=true "Stages in Classification")

## Data Generation

Data is generated on 30 virtual machines on which load generation is done using the web application built as SaaS.

The parameters used are cpu usage and memory usage. This is collected over a period of 50s and replicated into 5 different users. This results in a total of 5 files each with 50 lines of data corresponding to cpu usage and memory usage.
This code is run on client virtual machines.

>The code for the same can be found in data_generation.sh 

## Data Collection

Data files are generated on client machines. These files are pulled by the server into it's memory space. 

>The code for the same can be found in data_collection.sh

## Data Preprocessing

The main reason why data preprocessing is necessary is because data generated at the client end is skewed andcontains outliers. 

For eg. when an application is launched or closed, cpu usage percentage increases and falls if the application is not being used or the application cpu usage is low. To avoid such cases, data preprocessing is done.

A simple technique is used to preprocess data: average of cpu usage and memory usage is taken for each client machine.

Thus, by calculating the average of 50 values of cpu usage and memory usage results in a total of 150 rows representing data extracted form 150 client machines ( 30 machines impersonating 5 each)

>The code for the same can be found in DataPreprocess.java

## Training

Having collected training data it needs to be classified into different priorities. Initial training data is classified into four classes namely Class A,B,C,D. 

The initial ruleset is based on which the training set was classified is:-

![Classification RulesetA](class.JPG?raw=true "Classification RulesetA")

Using a decision tree model based on the C4.5 algorithm, training data was used as input to the model. Output of the same was a trained decision tree model and a RulesetB which is a corrected ruleset.

>The code for C4.5 algorithm can be found in c4.5.c, c4.5rules.c, consult.c and consultr.c

The same can be used to train the model as follows:-

```
$c4.5 -f cloud
$c4.5rules -f cloud
```
Here, cloud is the file cloud.csv which contains the training dataset.

Eg:-

![Training and RulesetB](training_final.JPG?raw=true "Training and RulesetB")

## Classification

Now that a decision tree model is trained, it needs to be used to test different dynamic client data.

Client data received by the server/service provider will again be raw data which needs to be preprocessed.
Now, this client test data needs labling to be used as test data. This labling is done by classificiation of clients into Classes A,B,C or D based on Ruleset A.

The code to extract rules from a generalised ruleset (here rulesetA) and classify client test data is done using two pieces of code, one to extract rules in an understandable format and another to use this output to classify data.

>The code for the same can be found in Extraction.java and Generalized.java

## Testing

Testing is now done as follows.
Classified client test data is used as test data input. This data is evaluated based on RulesetB generated by the training model. The output states the percentage accuracy in labling of test data By RulesetA as against RulesetB.

```
$ c4.5rules -f cloud -u
```

## Re-Training

To improve accuracy of the model, RulesetB(i-1) geenrated by Training model t(i-1) is now used as RulesetA(i) for training model t(i) and a new RulesetB(i) is generated again.
```
RulesetA(i)= RulesetB(i-1)

RulesetB(i)= newly generated by new training model
```
This process can be repeated multiple times till the accuracy observed in user classification is satisfactory.

# Why User Reputation and not User Classification

Contrast to common understanding of a reputation system, here the model is called a user reputation system for cloud service providers because the cloud service providers are able to assess and prioritise their users based on their reputation of how well their allocated resources are being used. 

This classification helps build a reputation for each user where a Class A user or client is considered to be a high priority and first serve user and a Class D is the lowest priority user.

# Decision Tree Model

![Tree Model](wekaJ48_93_final.PNG?raw=true "Tree Model")

